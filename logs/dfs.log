2025-10-30 21:46:46 [INFO] [Main] Starting DFS server on port 10003
2025-10-30 21:46:46 [INFO] [Releaser] Starting release task...
2025-10-30 21:46:46 [INFO] [Releaser] Task successfully started.
2025-10-30 21:46:46 [INFO] [LockCacheService] Initializing LockCache service...
2025-10-30 21:46:46 [INFO] [LockCacheService] Successfully initialized (attached to gRPC server).
2025-10-30 21:46:46 [INFO] [Main] DFS is running on port 10003
2025-10-30 21:46:47 [INFO] [DFS] Trying to acquire lock: lock_id=/test-dir/ owner_id=127.0.0.1:10003:DfsClient seq=1
2025-10-30 21:46:47 [INFO] [CacheManager] Trying to acquire lock /test-dir/ (seq=1)
2025-10-30 21:46:47 [INFO] [CacheManager] Lock /test-dir/ acquired (seq=1)
2025-10-30 21:46:47 [INFO] [DFS] Lock /test-dir/ successfully acquired by 127.0.0.1:10003:DfsClient (seq=1)
2025-10-30 21:46:47 [INFO] [ExtentCache] Received Put request for '/test-dir/'.
2025-10-30 21:46:47 [WARN] [ExtentCache] Empty file-data for '/test-dir/'.
2025-10-30 21:46:47 [INFO] [ExtentCache] Caching new file-data for '/test-dir/'.
2025-10-30 21:46:47 [INFO] [ExtentCache] Returning cached data for '/test-dir/'.
2025-10-30 21:46:47 [INFO] [ExtentCache] Caching new file-data for '/'.
2025-10-30 21:46:47 [INFO] [ExtentCache] Updating file-data for '/test-dir/'.
2025-10-30 21:46:47 [INFO] [ExtentCache] Updating cached file '/test-dir/'.
2025-10-30 21:46:47 [INFO] [ExtentCache] Added 'test-dir' to parent '/'.
2025-10-30 21:46:47 [INFO] [DFS] Releasing lock: lock_id=/test-dir/ owner_id=127.0.0.1:10003:DfsClient seq=1
2025-10-30 21:46:47 [INFO] [ExtentCache] Successfully synchronized dirty file '/test-dir/' with server.
2025-10-30 21:46:47 [INFO] [ExtentCache] Successfully synchronized parent '/' with server.
2025-10-30 21:46:47 [INFO] [CacheManager] Released lock /test-dir/ → Free
2025-10-30 21:46:47 [INFO] Lock /test-dir/ released successfully by 127.0.0.1:10003:DfsClient
2025-10-30 21:46:47 [INFO] [DFS] Put request: /test-dir/test-file
2025-10-30 21:46:47 [INFO] [DFS] Trying to acquire lock: lock_id=/test-dir/test-file owner_id=127.0.0.1:10003:DfsClient seq=2
2025-10-30 21:46:47 [INFO] [CacheManager] Trying to acquire lock /test-dir/test-file (seq=2)
2025-10-30 21:46:47 [INFO] [CacheManager] Lock /test-dir/test-file acquired (seq=2)
2025-10-30 21:46:47 [INFO] [DFS] Lock /test-dir/test-file successfully acquired by 127.0.0.1:10003:DfsClient (seq=2)
2025-10-30 21:46:47 [INFO] [ExtentCache] Received Put request for '/test-dir/test-file'.
2025-10-30 21:46:47 [WARN] [ExtentCache] Empty file-data for '/test-dir/test-file'.
2025-10-30 21:46:47 [INFO] [ExtentCache] Caching new file-data for '/test-dir/test-file'.
2025-10-30 21:46:47 [INFO] [ExtentCache] Returning cached data for '/test-dir/test-file'.
2025-10-30 21:46:47 [INFO] [ExtentCache] Updating file-data for '/test-dir/test-file'.
2025-10-30 21:46:47 [INFO] [ExtentCache] Updating cached file '/test-dir/test-file'.
2025-10-30 21:46:47 [INFO] [ExtentCache] Added 'test-file' to parent '/test-dir/'.
2025-10-30 21:46:47 [INFO] [DFS] Put: file /test-dir/test-file saved successfully
2025-10-30 21:46:47 [INFO] [DFS] Releasing lock: lock_id=/test-dir/test-file owner_id=127.0.0.1:10003:DfsClient seq=2
2025-10-30 21:46:47 [INFO] [ExtentCache] Successfully synchronized dirty file '/test-dir/test-file' with server.
2025-10-30 21:46:47 [INFO] [ExtentCache] Successfully synchronized parent '/test-dir/' with server.
2025-10-30 21:46:47 [INFO] [CacheManager] Released lock /test-dir/test-file → Free
2025-10-30 21:46:47 [INFO] Lock /test-dir/test-file released successfully by 127.0.0.1:10003:DfsClient
2025-10-30 21:46:47 [INFO] [DFS] Trying to acquire lock: lock_id=/test-dir/ owner_id=127.0.0.1:10003:DfsClient seq=3
2025-10-30 21:46:47 [INFO] [CacheManager] Reused cached lock /test-dir/ (local reuse)
2025-10-30 21:46:47 [INFO] [DFS] Lock /test-dir/ successfully acquired by 127.0.0.1:10003:DfsClient (seq=3)
2025-10-30 21:46:47 [INFO] [ExtentCache] Returning cached data for '/test-dir/'.
2025-10-30 21:46:47 [INFO] [DFS] Releasing lock: lock_id=/test-dir/ owner_id=127.0.0.1:10003:DfsClient seq=3
2025-10-30 21:46:47 [INFO] [ExtentCache] Successfully synchronized dirty file '/test-dir/' with server.
2025-10-30 21:46:47 [INFO] [ExtentCache] Successfully synchronized parent '/' with server.
2025-10-30 21:46:47 [INFO] [CacheManager] Released lock /test-dir/ → Free
2025-10-30 21:46:47 [INFO] Lock /test-dir/ released successfully by 127.0.0.1:10003:DfsClient
2025-10-30 21:46:47 [INFO] [DFS] Trying to acquire lock: lock_id=/test-dir/test-file owner_id=127.0.0.1:10003:DfsClient seq=4
2025-10-30 21:46:47 [INFO] [CacheManager] Reused cached lock /test-dir/test-file (local reuse)
2025-10-30 21:46:47 [INFO] [DFS] Lock /test-dir/test-file successfully acquired by 127.0.0.1:10003:DfsClient (seq=4)
2025-10-30 21:46:47 [INFO] [ExtentCache] Returning cached data for '/test-dir/test-file'.
2025-10-30 21:46:47 [INFO] [DFS] Releasing lock: lock_id=/test-dir/test-file owner_id=127.0.0.1:10003:DfsClient seq=4
2025-10-30 21:46:47 [INFO] [ExtentCache] Successfully synchronized dirty file '/test-dir/test-file' with server.
2025-10-30 21:46:47 [INFO] [ExtentCache] Successfully synchronized parent '/test-dir/' with server.
2025-10-30 21:46:47 [INFO] [CacheManager] Released lock /test-dir/test-file → Free
2025-10-30 21:46:47 [INFO] Lock /test-dir/test-file released successfully by 127.0.0.1:10003:DfsClient
2025-10-30 21:46:47 [INFO] [DFS] Trying to acquire lock: lock_id=/test-dir/test-file owner_id=127.0.0.1:10003:DfsClient seq=5
2025-10-30 21:46:47 [INFO] [CacheManager] Reused cached lock /test-dir/test-file (local reuse)
2025-10-30 21:46:47 [INFO] [DFS] Lock /test-dir/test-file successfully acquired by 127.0.0.1:10003:DfsClient (seq=5)
2025-10-30 21:46:47 [INFO] [ExtentCache] Received Put request for '/test-dir/test-file'.
2025-10-30 21:46:47 [INFO] [ExtentCache] Returning cached data for '/test-dir/test-file'.
2025-10-30 21:46:47 [INFO] [ExtentCache] No file-data provided for '/test-dir/test-file' — performing delete.
2025-10-30 21:46:47 [INFO] [ExtentCache] Deleted file '/test-dir/test-file' successfully.
2025-10-30 21:46:47 [INFO] [DFS] Releasing lock: lock_id=/test-dir/test-file owner_id=127.0.0.1:10003:DfsClient seq=5
2025-10-30 21:46:47 [INFO] [ExtentCache] Successfully synchronized dirty file '/test-dir/test-file' with server.
2025-10-30 21:46:47 [INFO] [ExtentCache] Successfully synchronized parent '/test-dir/' with server.
2025-10-30 21:46:47 [INFO] [CacheManager] Released lock /test-dir/test-file → Free
2025-10-30 21:46:47 [INFO] Lock /test-dir/test-file released successfully by 127.0.0.1:10003:DfsClient
2025-10-30 21:46:47 [INFO] [DFS] Trying to acquire lock: lock_id=/test-dir/ owner_id=127.0.0.1:10003:DfsClient seq=6
2025-10-30 21:46:47 [INFO] [CacheManager] Reused cached lock /test-dir/ (local reuse)
2025-10-30 21:46:47 [INFO] [DFS] Lock /test-dir/ successfully acquired by 127.0.0.1:10003:DfsClient (seq=6)
2025-10-30 21:46:47 [INFO] [ExtentCache] Received Put request for '/test-dir/'.
2025-10-30 21:46:47 [INFO] [ExtentCache] Returning cached data for '/test-dir/'.
2025-10-30 21:46:47 [INFO] [ExtentCache] No file-data provided for '/test-dir/' — performing delete.
2025-10-30 21:46:47 [INFO] [ExtentCache] Deleted file '/test-dir/' successfully.
2025-10-30 21:46:47 [INFO] [DFS] Releasing lock: lock_id=/test-dir/ owner_id=127.0.0.1:10003:DfsClient seq=6
2025-10-30 21:46:47 [INFO] [ExtentCache] Successfully synchronized dirty file '/test-dir/' with server.
2025-10-30 21:46:47 [INFO] [ExtentCache] Successfully synchronized parent '/' with server.
2025-10-30 21:46:47 [INFO] [CacheManager] Released lock /test-dir/ → Free
2025-10-30 21:46:47 [INFO] Lock /test-dir/ released successfully by 127.0.0.1:10003:DfsClient
2025-10-30 21:46:47 [INFO] [LockCacheService] Received revoke request for lock /test-dir/test-file
2025-10-30 21:46:47 [INFO] [LockCacheService] Lock /test-dir/test-file now Free — sending to Releaser
2025-10-30 21:46:47 [INFO] [Releaser] Added release task for lock=/test-dir/test-file
2025-10-30 21:46:47 [INFO] [LockCacheService] Revoke completed for lock /test-dir/test-file
2025-10-30 21:46:47 [INFO] [Releaser] Processing release task: lock=/test-dir/test-file, owner=127.0.0.1:10003:DfsClient, seq=5
2025-10-30 21:46:47 [INFO] [Releaser] Changing state: Free → Releasing
2025-10-30 21:46:47 [INFO] [CacheManager] releasing lock for '/test-dir/test-file' — starting update and flush sequence
2025-10-30 21:46:47 [INFO] [ExtentCache] Successfully synchronized dirty file '/test-dir/test-file' with server.
2025-10-30 21:46:47 [INFO] [ExtentCache] Successfully synchronized parent '/test-dir/' with server.
2025-10-30 21:46:47 [INFO] [ExtentCache] Successfully flushed '/test-dir/test-file' from local cache.
2025-10-30 21:46:47 [INFO] [ExtentCache] Successfully flushed parent '/test-dir/' from local cache.
2025-10-30 21:46:47 [INFO] [CacheManager] Release RPC succeeded for /test-dir/test-file → None
2025-10-30 21:46:47 [INFO] [Releaser] Lock /test-dir/test-file released successfully (server response: )
2025-10-30 21:46:52 [INFO] [LockCacheService] Received revoke request for lock /test-dir/
2025-10-30 21:46:52 [INFO] [LockCacheService] Lock /test-dir/ now Free — sending to Releaser
2025-10-30 21:46:52 [INFO] [Releaser] Added release task for lock=/test-dir/
2025-10-30 21:46:52 [INFO] [LockCacheService] Revoke completed for lock /test-dir/
2025-10-30 21:46:52 [INFO] [Releaser] Processing release task: lock=/test-dir/, owner=127.0.0.1:10003:DfsClient, seq=6
2025-10-30 21:46:52 [INFO] [Releaser] Changing state: Free → Releasing
2025-10-30 21:46:52 [INFO] [CacheManager] releasing lock for '/test-dir/' — starting update and flush sequence
2025-10-30 21:46:52 [WARN] [ExtentCache] File '/test-dir/' not in cache — skipping update.
2025-10-30 21:46:52 [WARN] [ExtentCache] File '/test-dir/' not in cache — skipping flush.
2025-10-30 21:46:52 [INFO] [CacheManager] Release RPC succeeded for /test-dir/ → None
2025-10-30 21:46:52 [INFO] [Releaser] Lock /test-dir/ released successfully (server response: )
